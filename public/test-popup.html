<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŒì—… í…ŒìŠ¤íŠ¸ í˜ì´ì§€</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            color: #333;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        h1 {
            color: #667eea;
            margin-bottom: 20px;
        }
        button {
            padding: 12px 24px;
            margin: 10px 5px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: transform 0.2s;
        }
        button:hover {
            transform: scale(1.05);
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .btn-success {
            background: #28a745;
            color: white;
        }
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        .btn-info {
            background: #17a2b8;
            color: white;
        }
        .status {
            padding: 15px;
            margin: 15px 0;
            border-radius: 6px;
            background: #f8f9fa;
        }
        .code {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”” EventBET íŒì—… ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸</h1>
        
        <div class="status" id="status">
            <strong>ìƒíƒœ:</strong> ëŒ€ê¸° ì¤‘...
        </div>

        <h2>1. í…ŒìŠ¤íŠ¸ íŒì—… ìƒì„±</h2>
        <button class="btn-success" onclick="createTestPopup()">âœ… í…ŒìŠ¤íŠ¸ íŒì—… ìƒì„±</button>
        <button class="btn-danger" onclick="clearAllPopups()">ğŸ—‘ï¸ ëª¨ë“  íŒì—… ì‚­ì œ</button>

        <h2>2. í˜„ì¬ ì €ì¥ëœ íŒì—…</h2>
        <button class="btn-info" onclick="showPopups()">ğŸ“‹ íŒì—… ëª©ë¡ ë³´ê¸°</button>
        <div class="code" id="popup-data">í´ë¦­í•˜ì—¬ ë°ì´í„° í™•ì¸</div>

        <h2>3. íŒì—… í‘œì‹œ í…ŒìŠ¤íŠ¸</h2>
        <button class="btn-primary" onclick="testPopupDisplay()">ğŸš€ íŒì—… í‘œì‹œ í…ŒìŠ¤íŠ¸</button>
        <button class="btn-info" onclick="goToMain()">ğŸ  ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™</button>

        <h2>4. ë””ë²„ê¹… ì •ë³´</h2>
        <div class="code" id="console-log">ì½˜ì†” ë¡œê·¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>
    </div>

    <!-- Popup Container -->
    <div id="popup-container"></div>

    <script src="/static/popup.js"></script>
    <script>
        // ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateStatus(message, type = 'info') {
            const status = document.getElementById('status');
            const colors = {
                success: '#d4edda',
                error: '#f8d7da',
                info: '#d1ecf1'
            };
            status.style.background = colors[type] || colors.info;
            status.innerHTML = `<strong>ìƒíƒœ:</strong> ${message}`;
        }

        // ì½˜ì†” ë¡œê·¸ ìº¡ì²˜
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog.apply(console, args);
            const logDiv = document.getElementById('console-log');
            logDiv.textContent += args.join(' ') + '\n';
            logDiv.scrollTop = logDiv.scrollHeight;
        };

        // í…ŒìŠ¤íŠ¸ íŒì—… ìƒì„±
        function createTestPopup() {
            const testPopup = {
                id: Date.now().toString(),
                title: 'í…ŒìŠ¤íŠ¸ íŒì—…',
                type: 'image',
                image: 'https://via.placeholder.com/600x400/667eea/ffffff?text=EventBET+Test+Popup',
                youtube: '',
                enabled: true,
                top: 10,
                left: 10,
                width: 600,
                height: 400,
                createdAt: new Date().toISOString()
            };

            const popups = JSON.parse(localStorage.getItem('eventbet_popups') || '[]');
            popups.push(testPopup);
            localStorage.setItem('eventbet_popups', JSON.stringify(popups));

            updateStatus(`í…ŒìŠ¤íŠ¸ íŒì—…ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤! (ID: ${testPopup.id})`, 'success');
            showPopups();
        }

        // ëª¨ë“  íŒì—… ì‚­ì œ
        function clearAllPopups() {
            localStorage.removeItem('eventbet_popups');
            sessionStorage.clear();
            updateStatus('ëª¨ë“  íŒì—…ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            showPopups();
        }

        // íŒì—… ëª©ë¡ ë³´ê¸°
        function showPopups() {
            const popups = JSON.parse(localStorage.getItem('eventbet_popups') || '[]');
            const dataDiv = document.getElementById('popup-data');
            
            if (popups.length === 0) {
                dataDiv.textContent = 'ì €ì¥ëœ íŒì—…ì´ ì—†ìŠµë‹ˆë‹¤.';
                updateStatus('ì €ì¥ëœ íŒì—…: 0ê°œ', 'info');
            } else {
                dataDiv.textContent = JSON.stringify(popups, null, 2);
                const activeCount = popups.filter(p => p.enabled).length;
                updateStatus(`ì €ì¥ëœ íŒì—…: ${popups.length}ê°œ (í™œì„±í™”: ${activeCount}ê°œ)`, 'success');
            }
        }

        // íŒì—… í‘œì‹œ í…ŒìŠ¤íŠ¸
        function testPopupDisplay() {
            updateStatus('íŒì—…ì„ í‘œì‹œí•©ë‹ˆë‹¤...', 'info');
            
            // ê¸°ì¡´ íŒì—… ì œê±°
            const container = document.getElementById('popup-container');
            container.innerHTML = '';
            
            // íŒì—… í‘œì‹œ
            if (typeof displayPopups === 'function') {
                displayPopups();
                updateStatus('íŒì—… í‘œì‹œ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ì—ˆìŠµë‹ˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•˜ì„¸ìš”.', 'success');
            } else {
                updateStatus('âŒ íŒì—… í‘œì‹œ í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!', 'error');
            }
        }

        // ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™
        function goToMain() {
            window.location.href = '/';
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ í™•ì¸
        window.addEventListener('DOMContentLoaded', () => {
            showPopups();
            updateStatus('í˜ì´ì§€ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            
            // popup.js ë¡œë“œ í™•ì¸
            if (typeof displayPopups === 'function') {
                console.log('âœ… popup.jsê°€ ì •ìƒì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } else {
                console.error('âŒ popup.js ë¡œë“œ ì‹¤íŒ¨!');
            }
        });
    </script>
</body>
</html>
